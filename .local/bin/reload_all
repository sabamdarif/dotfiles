#!/bin/bash

# Function to check if a process is running
is_running() {
    pgrep -x "$1" >/dev/null 2>&1
}

# Reload Hyprland
# hyprctl reload

# Waybar - reload if running, start if not
if is_running "waybar"; then
    echo "Reloading Waybar..."
    killall -SIGUSR2 waybar
else
    echo "Starting Waybar..."
    waybar &
    disown
fi

# SwayNC - restart if running, start if not
if is_running "swaync"; then
    echo "Restarting SwayNC..."
    swaync-client -R
    swaync-client -rs
else
    echo "Starting SwayNC..."
    swaync &
    disown
fi

# SwayOSD - restart if running, start if not
if is_running "swayosd-server"; then
    echo "Restarting SwayOSD..."
    pkill swayosd-server
    sleep 0.5 # Brief pause to ensure clean shutdown
    swayosd-server &
    disown
else
    echo "Starting SwayOSD..."
    swayosd-server &
    disown
fi

# Hyprpolkitagent - use systemctl to restart
# echo "Restarting hyprpolkitagent..."
# systemctl --user restart hyprpolkitagent

echo "All services processed."
